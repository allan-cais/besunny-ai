# Railway Configuration - Full Stack Deployment
# Deploying both frontend and backend on Railway

[deploy]
startCommand = "python start.py"
healthcheckPath = "/health"
healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

# Frontend build configuration - This tells Railway to build automatically
[build]
builder = "nixpacks"
buildCommand = "npm install && npm run build:production"
watchPatterns = ["src/**/*", "package.json", "vite.config.ts"]

# Environment variables for full stack
[deploy.envs]
NODE_ENV = "production"
PYTHON_VERSION = "3.11"
ENVIRONMENT = "production"
DEBUG = "false"
HOST = "0.0.0.0"
PORT = "8000"
WORKERS = "1"
ENABLE_METRICS = "false"
LOG_LEVEL = "INFO"
LOG_FORMAT = "json"
SECRET_KEY = "railway-staging-secret-key-change-in-production"
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = "30"
CORS_ORIGINS = "*"
CORS_ALLOW_CREDENTIALS = "false"
SUPABASE_URL = "https://placeholder.supabase.co"
SUPABASE_SERVICE_ROLE_KEY = "placeholder-key"
SUPABASE_ANON_KEY = "placeholder-key"
REDIS_URL = "redis://localhost:6379/0"

# Frontend environment variables
VITE_PYTHON_BACKEND_URL = "https://your-railway-backend.railway.app"
VITE_APP_NAME = "BeSunny.ai"
VITE_APP_VERSION = "17.0.0"
VITE_ENVIRONMENT = "production"
