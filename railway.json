{
  "$schema": "https://railway.app/railway.schema.json",
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "sleepApplication": false
  },
  "environments": {
    "production": {
      "services": {
        "frontend": {
          "buildCommand": "npm install && npm run build:production",
          "startCommand": "npx serve -s dist -l $PORT",
          "rootDirectory": ".",
          "build": {
            "builder": "nixpacks",
            "detection": {
              "node": true,
              "python": false,
              "deno": false
            },
            "source": {
              "path": ".",
              "exclude": ["backend/**", "supabase/**", "database/**", "docs/**", "*.md", "Dockerfile*", "deploy-*.sh", "**/deno.json", "**/*.deno"]
            },
            "output": {
              "path": "dist"
            }
          },
          "envs": {
            "NODE_ENV": "production",
            "ENVIRONMENT": "production",
            "VITE_APP_NAME": "BeSunny.ai",
            "VITE_APP_VERSION": "17.0.0",
            "VITE_ENVIRONMENT": "production",
            "VITE_PYTHON_BACKEND_URL": "https://your-backend-service.railway.app"
          }
        },
        "backend": {
          "buildCommand": "pip install -r requirements.txt",
          "startCommand": "cd backend && python start.py",
          "rootDirectory": ".",
          "build": {
            "builder": "nixpacks",
            "detection": {
              "python": true,
              "node": false,
              "deno": false
            },
            "source": {
              "path": ".",
              "exclude": ["src/**", "public/**", "package*.json", "vite.config.ts", "tailwind.config.ts", "tsconfig*.json", "*.md", "Dockerfile*", "deploy-*.sh", "node_modules/**", "dist/**", "**/deno.json", "**/*.deno"]
            }
          },
          "envs": {
            "PYTHON_VERSION": "3.11",
            "ENVIRONMENT": "production",
            "DEBUG": "false",
            "HOST": "0.0.0.0",
            "PORT": "$PORT",
            "WORKERS": "1",
            "ENABLE_METRICS": "false",
            "LOG_LEVEL": "INFO",
            "LOG_FORMAT": "json",
            "SECRET_KEY": "railway-staging-secret-key-change-in-production",
            "ALGORITHM": "HS256",
            "ACCESS_TOKEN_EXPIRE_MINUTES": "30",
            "CORS_ORIGINS": "*",
            "CORS_ALLOW_CREDENTIALS": "false",
            "SUPABASE_URL": "https://placeholder.supabase.co",
            "SUPABASE_SERVICE_ROLE_KEY": "placeholder-key",
            "SUPABASE_ANON_KEY": "placeholder-key",
            "REDIS_URL": "redis://localhost:6379/0"
          }
        }
      }
    }
  }
}
